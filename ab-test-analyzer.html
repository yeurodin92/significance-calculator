<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A/B Test Results Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .metric-selector {
            background: #f0f4f8;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #e2e8f0;
        }

        .metric-selector h3 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .metric-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .metric-tab {
            padding: 12px 24px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .metric-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .metric-tab:hover:not(.active) {
            border-color: #667eea;
            background: #f7fafc;
        }

        .metric-description {
            color: #4a5568;
            font-size: 0.9rem;
            margin-top: 10px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .input-fields {
            display: none !important;
        }

        .input-fields.active {
            display: block !important;
        }

        .input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .variant-card {
            background: #f8fafc;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .variant-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .variant-card h3 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
        }

        .variant-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .control-icon {
            background: #e53e3e;
        }

        .variant-icon-b {
            background: #38a169;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .analyze-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .results {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-card {
            background: #f7fafc;
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #667eea;
        }

        .result-card h4 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .metric-label {
            color: #4a5568;
        }

        .metric-value {
            font-weight: 600;
            color: #2d3748;
        }

        .significance-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        .significant {
            background: #c6f6d5;
            color: #22543d;
        }

        .not-significant {
            background: #fed7d7;
            color: #742a2a;
        }

        .warning {
            background: #fef5e7;
            color: #744210;
        }

        .reliability-section {
            background: #edf2f7;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }

        .reliability-section h4 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .reliability-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .reliability-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .check {
            background: #38a169;
        }

        .warning-icon {
            background: #d69e2e;
        }

        .error-icon {
            background: #e53e3e;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: #718096;
            border-top: 1px solid #e2e8f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>A/B Test Results Analyzer</h1>
            <p>Analyze your test results for statistical significance and data reliability</p>
        </div>

        <div class="content">
            <div class="metric-selector">
                <h3>Select Metric Type</h3>
                <div class="metric-tabs">
                    <div class="metric-tab active" onclick="switchMetricType('conversion')">
                        Conversion Rate
                    </div>
                    <div class="metric-tab" onclick="switchMetricType('continuous')">
                        Continuous (AOV, Revenue)
                    </div>
                </div>
                <div id="conversion-description" class="metric-description">
                    <strong>Conversion Rate Analysis:</strong> Use for binary outcomes like conversions, sign-ups, or clicks. Uses Z-test for proportions.
                </div>
                <div id="continuous-description" class="metric-description" style="display: none;">
                    <strong>Continuous Metric Analysis:</strong> Use for numerical metrics like Average Order Value, Revenue per User, or Session Duration. Uses Welch's t-test.
                </div>
            </div>

            <div id="conversion-inputs" class="input-section input-fields active">
                <div class="variant-card">
                    <h3><span class="variant-icon control-icon"></span>Control (A)</h3>
                    <div class="input-group">
                        <label for="control-visitors">Visitors</label>
                        <input type="number" id="control-visitors" placeholder="e.g., 1000">
                    </div>
                    <div class="input-group">
                        <label for="control-conversions">Conversions</label>
                        <input type="number" id="control-conversions" placeholder="e.g., 50">
                    </div>
                </div>

                <div class="variant-card">
                    <h3><span class="variant-icon variant-icon-b"></span>Variant (B)</h3>
                    <div class="input-group">
                        <label for="variant-visitors">Visitors</label>
                        <input type="number" id="variant-visitors" placeholder="e.g., 1000">
                    </div>
                    <div class="input-group">
                        <label for="variant-conversions">Conversions</label>
                        <input type="number" id="variant-conversions" placeholder="e.g., 65">
                    </div>
                </div>
            </div>

            <div id="continuous-inputs" class="input-section input-fields">
                <div class="variant-card">
                    <h3><span class="variant-icon control-icon"></span>Control (A)</h3>
                    <div class="input-group">
                        <label for="control-sample-size">Sample Size</label>
                        <input type="number" id="control-sample-size" placeholder="e.g., 1000">
                    </div>
                    <div class="input-group">
                        <label for="control-mean">Mean Value</label>
                        <input type="number" id="control-mean" step="0.01" placeholder="e.g., 45.50">
                    </div>
                    <div class="input-group">
                        <label for="control-std">Standard Deviation</label>
                        <input type="number" id="control-std" step="0.01" placeholder="e.g., 12.30">
                    </div>
                </div>

                <div class="variant-card">
                    <h3><span class="variant-icon variant-icon-b"></span>Variant (B)</h3>
                    <div class="input-group">
                        <label for="variant-sample-size">Sample Size</label>
                        <input type="number" id="variant-sample-size" placeholder="e.g., 1000">
                    </div>
                    <div class="input-group">
                        <label for="variant-mean">Mean Value</label>
                        <input type="number" id="variant-mean" step="0.01" placeholder="e.g., 48.75">
                    </div>
                    <div class="input-group">
                        <label for="variant-std">Standard Deviation</label>
                        <input type="number" id="variant-std" step="0.01" placeholder="e.g., 13.10">
                    </div>
                </div>
            </div>

            <button class="analyze-btn" onclick="analyzeResults()">
                Analyze Results
            </button>

            <div id="results" class="results">
                <div class="results-grid">
                    <div class="result-card">
                        <h4 id="primary-metric-title">Conversion Rates</h4>
                        <div class="metric">
                            <span class="metric-label" id="control-label">Control (A):</span>
                            <span class="metric-value" id="control-rate">-</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label" id="variant-label">Variant (B):</span>
                            <span class="metric-value" id="variant-rate">-</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Relative Improvement:</span>
                            <span class="metric-value" id="improvement">-</span>
                        </div>
                        <div class="metric" id="effect-size-metric" style="display: none;">
                            <span class="metric-label">Effect Size (Cohen's d):</span>
                            <span class="metric-value" id="effect-size">-</span>
                        </div>
                    </div>

                    <div class="result-card">
                        <h4>Statistical Analysis</h4>
                        <div class="metric">
                            <span class="metric-label">P-value:</span>
                            <span class="metric-value" id="p-value">-</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label" id="test-statistic-label">Z-score:</span>
                            <span class="metric-value" id="z-score">-</span>
                        </div>
                        <div class="metric" id="degrees-freedom" style="display: none;">
                            <span class="metric-label">Degrees of Freedom:</span>
                            <span class="metric-value" id="df">-</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Confidence Interval:</span>
                            <span class="metric-value" id="confidence-interval">-</span>
                        </div>
                        <div id="significance-badge"></div>
                    </div>

                    <div class="result-card">
                        <h4>Sample Size & Power</h4>
                        <div class="metric">
                            <span class="metric-label">Total Sample Size:</span>
                            <span class="metric-value" id="total-sample">-</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Statistical Power:</span>
                            <span class="metric-value" id="statistical-power">-</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Minimum Detectable Effect:</span>
                            <span class="metric-value" id="mde">-</span>
                        </div>
                    </div>
                </div>

                <div class="reliability-section">
                    <h4>Data Reliability Checks</h4>
                    <div id="reliability-checks"></div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>Built with statistical rigor • Use for educational purposes</p>
        </div>
    </div>

    <script>
        let currentMetricType = 'conversion';

        function switchMetricType(type) {
            currentMetricType = type;
            
            // Update tab appearances
            document.querySelectorAll('.metric-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show/hide input sections
            document.getElementById('conversion-inputs').classList.toggle('active', type === 'conversion');
            document.getElementById('continuous-inputs').classList.toggle('active', type === 'continuous');
            
            // Show/hide descriptions
            document.getElementById('conversion-description').style.display = type === 'conversion' ? 'block' : 'none';
            document.getElementById('continuous-description').style.display = type === 'continuous' ? 'block' : 'none';
            
            // Hide results when switching
            document.getElementById('results').style.display = 'none';
        }

        function analyzeResults() {
            if (currentMetricType === 'conversion') {
                analyzeConversionResults();
            } else {
                analyzeContinuousResults();
            }
        }

        function analyzeConversionResults() {
            const controlVisitors = parseInt(document.getElementById('control-visitors').value);
            const controlConversions = parseInt(document.getElementById('control-conversions').value);
            const variantVisitors = parseInt(document.getElementById('variant-visitors').value);
            const variantConversions = parseInt(document.getElementById('variant-conversions').value);

            if (!controlVisitors || !controlConversions || !variantVisitors || !variantConversions) {
                alert('Please fill in all fields with valid numbers.');
                return;
            }

            if (controlConversions > controlVisitors || variantConversions > variantVisitors) {
                alert('Conversions cannot exceed visitors.');
                return;
            }

            const controlRate = controlConversions / controlVisitors;
            const variantRate = variantConversions / variantVisitors;
            const improvement = ((variantRate - controlRate) / controlRate * 100);

            const pooledRate = (controlConversions + variantConversions) / (controlVisitors + variantVisitors);
            const standardError = Math.sqrt(pooledRate * (1 - pooledRate) * (1/controlVisitors + 1/variantVisitors));
            const zScore = (variantRate - controlRate) / standardError;
            const pValue = 2 * (1 - normalCDF(Math.abs(zScore)));

            const controlSE = Math.sqrt(controlRate * (1 - controlRate) / controlVisitors);
            const variantSE = Math.sqrt(variantRate * (1 - variantRate) / variantVisitors);
            const diffSE = Math.sqrt(controlSE * controlSE + variantSE * variantSE);
            const marginOfError = 1.96 * diffSE;
            const lowerCI = (variantRate - controlRate) - marginOfError;
            const upperCI = (variantRate - controlRate) + marginOfError;

            const totalSample = controlVisitors + variantVisitors;
            const effectSize = Math.abs(variantRate - controlRate) / Math.sqrt(pooledRate * (1 - pooledRate));
            const statisticalPower = calculatePower(effectSize, totalSample);
            const mde = calculateMDE(totalSample, 0.8, 0.05);

            updateConversionResults(controlRate, variantRate, improvement, pValue, zScore, lowerCI, upperCI, totalSample, statisticalPower, mde);
            performConversionReliabilityChecks(controlVisitors, controlConversions, variantVisitors, variantConversions, pValue, statisticalPower);

            document.getElementById('results').style.display = 'block';
        }

        function analyzeContinuousResults() {
            const controlN = parseInt(document.getElementById('control-sample-size').value);
            const controlMean = parseFloat(document.getElementById('control-mean').value);
            const controlStd = parseFloat(document.getElementById('control-std').value);
            const variantN = parseInt(document.getElementById('variant-sample-size').value);
            const variantMean = parseFloat(document.getElementById('variant-mean').value);
            const variantStd = parseFloat(document.getElementById('variant-std').value);

            if (!controlN || !controlMean || !controlStd || !variantN || !variantMean || !variantStd) {
                alert('Please fill in all fields with valid numbers.');
                return;
            }

            if (controlStd <= 0 || variantStd <= 0) {
                alert('Standard deviation must be greater than 0.');
                return;
            }

            // Welch's t-test for unequal variances
            const meanDiff = variantMean - controlMean;
            const improvement = (meanDiff / controlMean * 100);
            
            const se1 = (controlStd * controlStd) / controlN;
            const se2 = (variantStd * variantStd) / variantN;
            const pooledSE = Math.sqrt(se1 + se2);
            
            const tStatistic = meanDiff / pooledSE;
            
            // Welch-Satterthwaite equation for degrees of freedom
            const df = Math.pow(se1 + se2, 2) / (Math.pow(se1, 2) / (controlN - 1) + Math.pow(se2, 2) / (variantN - 1));
            
            const pValue = 2 * (1 - tCDF(Math.abs(tStatistic), df));
            
            // Confidence interval for mean difference
            const tCritical = tInverse(0.025, df); // 95% CI
            const marginOfError = tCritical * pooledSE;
            const lowerCI = meanDiff - marginOfError;
            const upperCI = meanDiff + marginOfError;
            
            // Cohen's d effect size
            const pooledStd = Math.sqrt(((controlN - 1) * controlStd * controlStd + (variantN - 1) * variantStd * variantStd) / (controlN + variantN - 2));
            const cohensD = meanDiff / pooledStd;
            
            const totalSample = controlN + variantN;
            const statisticalPower = calculateTTestPower(Math.abs(cohensD), controlN, variantN);
            const mde = calculateTTestMDE(controlN, variantN, 0.8, 0.05) * pooledStd;

            updateContinuousResults(controlMean, variantMean, improvement, pValue, tStatistic, df, lowerCI, upperCI, totalSample, statisticalPower, mde, cohensD);
            performContinuousReliabilityChecks(controlN, variantN, controlStd, variantStd, pValue, statisticalPower, cohensD);

            document.getElementById('results').style.display = 'block';
        }

        function normalCDF(x) {
            return 0.5 * (1 + erf(x / Math.sqrt(2)));
        }

        function erf(x) {
            const a1 =  0.254829592;
            const a2 = -0.284496736;
            const a3 =  1.421413741;
            const a4 = -1.453152027;
            const a5 =  1.061405429;
            const p  =  0.3275911;

            const sign = x < 0 ? -1 : 1;
            x = Math.abs(x);

            const t = 1.0 / (1.0 + p * x);
            const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);

            return sign * y;
        }

        function calculatePower(effectSize, sampleSize) {
            const alpha = 0.05;
            const criticalValue = 1.96;
            const beta = normalCDF(criticalValue - effectSize * Math.sqrt(sampleSize / 2));
            return Math.max(0, Math.min(1, 1 - beta));
        }

        function calculateMDE(sampleSize, power, alpha) {
            const criticalValue = 1.96;
            const powerValue = 0.84;
            return (criticalValue + powerValue) / Math.sqrt(sampleSize / 2);
        }

        // T-distribution functions
        function tCDF(t, df) {
            // Approximation for t-distribution CDF
            if (df >= 30) {
                return normalCDF(t);
            }
            
            // Use gamma function approximation for smaller df
            const x = t / Math.sqrt(df);
            const a = 0.5;
            const b = df / 2;
            
            // Simple approximation - for production use, implement proper incomplete beta function
            const p = 0.5 + 0.5 * Math.sign(t) * (1 - Math.exp(-0.717 * Math.abs(t) - 0.416 * t * t));
            return Math.max(0, Math.min(1, p));
        }

        function tInverse(p, df) {
            // Approximation for t-distribution inverse CDF
            if (df >= 30) {
                return normalInverse(p);
            }
            
            // Simple approximation for t-inverse
            const z = normalInverse(p);
            const correction = (z * z * z + z) / (4 * df);
            return z + correction;
        }

        function normalInverse(p) {
            // Approximation for standard normal inverse CDF
            if (p <= 0 || p >= 1) return p <= 0 ? -Infinity : Infinity;
            
            const c0 = 2.515517;
            const c1 = 0.802853;
            const c2 = 0.010328;
            const d1 = 1.432788;
            const d2 = 0.189269;
            const d3 = 0.001308;
            
            let x, t;
            if (p > 0.5) {
                t = Math.sqrt(-2 * Math.log(1 - p));
                x = t - (c0 + c1 * t + c2 * t * t) / (1 + d1 * t + d2 * t * t + d3 * t * t * t);
            } else {
                t = Math.sqrt(-2 * Math.log(p));
                x = -(t - (c0 + c1 * t + c2 * t * t) / (1 + d1 * t + d2 * t * t + d3 * t * t * t));
            }
            
            return x;
        }

        function calculateTTestPower(effectSize, n1, n2) {
            // Approximate power calculation for t-test
            const df = n1 + n2 - 2;
            const ncp = effectSize * Math.sqrt((n1 * n2) / (n1 + n2));
            const criticalT = tInverse(0.975, df);
            
            // Non-central t approximation
            const power = 1 - tCDF(criticalT - ncp, df) + tCDF(-criticalT - ncp, df);
            return Math.max(0, Math.min(1, power));
        }

        function calculateTTestMDE(n1, n2, power, alpha) {
            // Approximate MDE calculation for t-test
            const df = n1 + n2 - 2;
            const criticalT = tInverse(1 - alpha/2, df);
            const powerT = tInverse(power, df);
            
            return (criticalT + powerT) / Math.sqrt((n1 * n2) / (n1 + n2));
        }

        function updateConversionResults(controlRate, variantRate, improvement, pValue, zScore, lowerCI, upperCI, totalSample, statisticalPower, mde) {
            // Update UI labels for conversion analysis
            document.getElementById('primary-metric-title').textContent = 'Conversion Rates';
            document.getElementById('control-label').textContent = 'Control (A):';
            document.getElementById('variant-label').textContent = 'Variant (B):';
            document.getElementById('test-statistic-label').textContent = 'Z-score:';
            document.getElementById('effect-size-metric').style.display = 'none';
            document.getElementById('degrees-freedom').style.display = 'none';
            
            document.getElementById('control-rate').textContent = (controlRate * 100).toFixed(2) + '%';
            document.getElementById('variant-rate').textContent = (variantRate * 100).toFixed(2) + '%';
            document.getElementById('improvement').textContent = (improvement >= 0 ? '+' : '') + improvement.toFixed(2) + '%';
            document.getElementById('p-value').textContent = pValue.toFixed(4);
            document.getElementById('z-score').textContent = zScore.toFixed(3);
            document.getElementById('confidence-interval').textContent = `[${(lowerCI * 100).toFixed(2)}%, ${(upperCI * 100).toFixed(2)}%]`;
            document.getElementById('total-sample').textContent = totalSample.toLocaleString();
            document.getElementById('statistical-power').textContent = (statisticalPower * 100).toFixed(1) + '%';
            document.getElementById('mde').textContent = (mde * 100).toFixed(2) + '%';

            updateSignificanceBadge(pValue);
        }

        function updateContinuousResults(controlMean, variantMean, improvement, pValue, tStatistic, df, lowerCI, upperCI, totalSample, statisticalPower, mde, cohensD) {
            // Update UI labels for continuous analysis
            document.getElementById('primary-metric-title').textContent = 'Mean Values';
            document.getElementById('control-label').textContent = 'Control Mean:';
            document.getElementById('variant-label').textContent = 'Variant Mean:';
            document.getElementById('test-statistic-label').textContent = 'T-statistic:';
            document.getElementById('effect-size-metric').style.display = 'block';
            document.getElementById('degrees-freedom').style.display = 'block';
            
            document.getElementById('control-rate').textContent = controlMean.toFixed(2);
            document.getElementById('variant-rate').textContent = variantMean.toFixed(2);
            document.getElementById('improvement').textContent = (improvement >= 0 ? '+' : '') + improvement.toFixed(2) + '%';
            document.getElementById('p-value').textContent = pValue.toFixed(4);
            document.getElementById('z-score').textContent = tStatistic.toFixed(3);
            document.getElementById('df').textContent = df.toFixed(1);
            document.getElementById('confidence-interval').textContent = `[${lowerCI.toFixed(2)}, ${upperCI.toFixed(2)}]`;
            document.getElementById('total-sample').textContent = totalSample.toLocaleString();
            document.getElementById('statistical-power').textContent = (statisticalPower * 100).toFixed(1) + '%';
            document.getElementById('mde').textContent = mde.toFixed(2);
            document.getElementById('effect-size').textContent = cohensD.toFixed(3);

            updateSignificanceBadge(pValue);
        }

        function updateSignificanceBadge(pValue) {
            const significanceBadge = document.getElementById('significance-badge');
            if (pValue < 0.05) {
                significanceBadge.innerHTML = '<span class="significance-badge significant">Statistically Significant</span>';
            } else {
                significanceBadge.innerHTML = '<span class="significance-badge not-significant">Not Statistically Significant</span>';
            }
        }

        function performConversionReliabilityChecks(controlVisitors, controlConversions, variantVisitors, variantConversions, pValue, statisticalPower) {
            const checks = [];
            const minSampleSize = 100;
            const minConversions = 10;
            const minPower = 0.8;

            if (controlVisitors >= minSampleSize && variantVisitors >= minSampleSize) {
                checks.push({
                    status: 'check',
                    message: 'Sample sizes are adequate (≥100 per variant)'
                });
            } else {
                checks.push({
                    status: 'error',
                    message: 'Sample sizes too small (<100 per variant) - results may be unreliable'
                });
            }

            if (controlConversions >= minConversions && variantConversions >= minConversions) {
                checks.push({
                    status: 'check',
                    message: 'Sufficient conversions observed (≥10 per variant)'
                });
            } else {
                checks.push({
                    status: 'warning',
                    message: 'Low conversion counts (<10 per variant) - consider running test longer'
                });
            }

            if (statisticalPower >= minPower) {
                checks.push({
                    status: 'check',
                    message: `High statistical power (${(statisticalPower * 100).toFixed(1)}% ≥ 80%)`
                });
            } else {
                checks.push({
                    status: 'warning',
                    message: `Low statistical power (${(statisticalPower * 100).toFixed(1)}% < 80%) - may miss true effects`
                });
            }

            const sampleRatio = Math.min(controlVisitors, variantVisitors) / Math.max(controlVisitors, variantVisitors);
            if (sampleRatio >= 0.8) {
                checks.push({
                    status: 'check',
                    message: 'Sample sizes are well-balanced between variants'
                });
            } else {
                checks.push({
                    status: 'warning',
                    message: 'Unbalanced sample sizes - consider equal allocation'
                });
            }

            if (pValue < 0.05 && statisticalPower >= 0.8) {
                checks.push({
                    status: 'check',
                    message: 'Results are both significant and well-powered'
                });
            } else if (pValue >= 0.05 && statisticalPower < 0.8) {
                checks.push({
                    status: 'warning',
                    message: 'Non-significant result with low power - inconclusive test'
                });
            }

            const checksHTML = checks.map(check => `
                <div class="reliability-item">
                    <span class="reliability-icon ${check.status === 'check' ? 'check' : check.status === 'warning' ? 'warning-icon' : 'error-icon'}"></span>
                    <span>${check.message}</span>
                </div>
            `).join('');

            document.getElementById('reliability-checks').innerHTML = checksHTML;
        }

        function performContinuousReliabilityChecks(controlN, variantN, controlStd, variantStd, pValue, statisticalPower, cohensD) {
            const checks = [];
            const minSampleSize = 30;
            const minPower = 0.8;

            if (controlN >= minSampleSize && variantN >= minSampleSize) {
                checks.push({
                    status: 'check',
                    message: 'Sample sizes are adequate (≥30 per variant for t-test)'
                });
            } else {
                checks.push({
                    status: 'error',
                    message: 'Sample sizes too small (<30 per variant) - t-test assumptions may be violated'
                });
            }

            // Check for equal variances assumption
            const varianceRatio = Math.max(controlStd, variantStd) / Math.min(controlStd, variantStd);
            if (varianceRatio <= 2) {
                checks.push({
                    status: 'check',
                    message: 'Variances appear similar (ratio ≤ 2) - Welch\'s t-test is appropriate'
                });
            } else {
                checks.push({
                    status: 'warning',
                    message: `Large variance difference (ratio: ${varianceRatio.toFixed(2)}) - consider non-parametric tests`
                });
            }

            if (statisticalPower >= minPower) {
                checks.push({
                    status: 'check',
                    message: `High statistical power (${(statisticalPower * 100).toFixed(1)}% ≥ 80%)`
                });
            } else {
                checks.push({
                    status: 'warning',
                    message: `Low statistical power (${(statisticalPower * 100).toFixed(1)}% < 80%) - may miss true effects`
                });
            }

            const sampleRatio = Math.min(controlN, variantN) / Math.max(controlN, variantN);
            if (sampleRatio >= 0.8) {
                checks.push({
                    status: 'check',
                    message: 'Sample sizes are well-balanced between variants'
                });
            } else {
                checks.push({
                    status: 'warning',
                    message: 'Unbalanced sample sizes - consider equal allocation'
                });
            }

            // Effect size interpretation
            const absCohensD = Math.abs(cohensD);
            if (absCohensD >= 0.8) {
                checks.push({
                    status: 'check',
                    message: `Large effect size (|d| = ${absCohensD.toFixed(3)} ≥ 0.8) - practically significant`
                });
            } else if (absCohensD >= 0.5) {
                checks.push({
                    status: 'check',
                    message: `Medium effect size (|d| = ${absCohensD.toFixed(3)}) - moderate practical significance`
                });
            } else if (absCohensD >= 0.2) {
                checks.push({
                    status: 'warning',
                    message: `Small effect size (|d| = ${absCohensD.toFixed(3)}) - limited practical significance`
                });
            } else {
                checks.push({
                    status: 'warning',
                    message: `Very small effect size (|d| = ${absCohensD.toFixed(3)}) - questionable practical significance`
                });
            }

            if (pValue < 0.05 && statisticalPower >= 0.8) {
                checks.push({
                    status: 'check',
                    message: 'Results are both significant and well-powered'
                });
            } else if (pValue >= 0.05 && statisticalPower < 0.8) {
                checks.push({
                    status: 'warning',
                    message: 'Non-significant result with low power - inconclusive test'
                });
            }

            const checksHTML = checks.map(check => `
                <div class="reliability-item">
                    <span class="reliability-icon ${check.status === 'check' ? 'check' : check.status === 'warning' ? 'warning-icon' : 'error-icon'}"></span>
                    <span>${check.message}</span>
                </div>
            `).join('');

            document.getElementById('reliability-checks').innerHTML = checksHTML;
        }

        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        analyzeResults();
                    }
                });
            });
            
            // Initialize with conversion mode
            currentMetricType = 'conversion';
        });
    </script>
</body>
</html>